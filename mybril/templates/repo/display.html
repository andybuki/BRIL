<script>
$( "#viewLink" )
  .button()
  .click(function() {
    $("#viewer-dialog").dialog({ 
        title: "Viewing: " + $("#title").text(), 
        height: 600, 
        width: 600,
        open: function(event, ui) {
          var url = "http://localhost:8000/repo/objects/" + $( "#viewLink" ).attr("value") + "/view/";
	        $('#viewer').load(url);
        }                
    });
});

$( "#downloadLink" ).button();

</script>
<h1 id="title">{{ obj.dc.content.title }}</h1>
<h2>{{ obj.dc.content.description }}</h2>
<hr/>
<p>Uploaded at {{ obj.created }}; last modified {{ obj.modified }} ({{  obj.modified|timesince }} ago).</p>
<hr/>
<br/>
<h3>Dublin Core</h3>
<table id="description">    
    {% with obj.dc.content as dc %}
        <tr><th>title:</th><td>{{ dc.title|default:'' }}</td></tr>
        <tr><th>description:</th><td>{{ dc.description|default:'' }}</td></tr>
        <tr><th>date:</th><td>{{ dc.date|default:'' }}</td></tr>
        <tr><th>format:</th><td>{{ dc.format|default:'' }}</td></tr>
        <tr><th>identifier:</th><td>{{ dc.identifier|default:'' }}</td></tr>
 {% endwith %}
</table>
<br/>
<h3>BRIL Metadata</h3>
<pre>{{ obj.brilmeta.content }}</pre>
<hr/>
<br/>
<h3>Original Data</h3>
<p>({{ obj.file.info.size|filesizeformat }}, {{ obj.file.mimetype }})</p>
{% if obj.file.info.size > 0 and obj.file.mimetype == "text/plain"%}
  <button id="viewLink" value="{{ obj.pid }}">View File</button>
{% endif %}
<a href="{% url download obj.pid %}" id="downloadLink">Download File</a>

